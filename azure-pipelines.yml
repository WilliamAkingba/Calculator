trigger:
  branches:
    include:
      - development

pool:
  vmImage: 'ubuntu-latest'

steps:
  # Clean Workspace
  - script: |
      echo "Cleaning workspace to remove any cached files..."
      git clean -fdx
      git reset --hard
    displayName: "Clean workspace"

  # Install Node.js
  - task: NodeTool@0
    inputs:
      versionSpec: '18.x'
    displayName: "Install Node.js"

  # Install Dependencies
  - script: npm install
    displayName: "Install dependencies"

  # Debug ESLint Configuration
  - script: |
      echo "Checking Node.js and ESLint Config"
      node -v
      npm -v
      ls -la eslint.config.js
      cat eslint.config.js
    displayName: "Debug ESLint Configuration"

  # Run ESLint
  - script: npx eslint .
    displayName: "Run ESLint (Static Code Analysis)"